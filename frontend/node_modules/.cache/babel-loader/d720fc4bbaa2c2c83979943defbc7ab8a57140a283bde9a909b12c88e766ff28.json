{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sahil Mir\\\\Downloads\\\\echo-ai-complete\\\\frontend\\\\src\\\\VoiceRecorder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { db } from './firebase'; // adjust path if needed\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VoiceRecorder({\n  onTranscribe\n}) {\n  _s();\n  const [recording, setRecording] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const handleStart = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const mediaRecorder = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorder.onstop = async () => {\n        const blob = new Blob(audioChunksRef.current, {\n          type: 'audio/webm'\n        });\n        const formData = new FormData();\n        formData.append(\"audio\", blob, \"recording.webm\");\n        try {\n          const res = await axios.post(\"http://localhost:5000/transcribe\", formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          const transcriptText = res.data.transcript;\n\n          // ‚úÖ Save to Firebase Firestore\n          await addDoc(collection(db, \"transcripts\"), {\n            text: transcriptText,\n            summary: \"No summary generated\",\n            tags: [\"voice\", \"recording\"],\n            timestamp: serverTimestamp()\n          });\n\n          // ‚ûï Update frontend as usual\n          onTranscribe({\n            text: transcriptText,\n            summary: \"No summary generated\",\n            tags: [\"voice\", \"recording\"]\n          });\n        } catch (err) {\n          console.error(\"‚ùå Error processing audio:\", err);\n        }\n      };\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start();\n      setRecording(true);\n    } catch (err) {\n      console.error(\"üéôÔ∏è Mic access denied or error:\", err);\n    }\n  };\n  const handleStop = () => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stop();\n      setRecording(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: recording ? handleStop : handleStart,\n      children: recording ? \"üõë Stop Recording\" : \"üéôÔ∏è Start Recording\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(VoiceRecorder, \"iihCjkzL20K33vHj1iywA3a+uCE=\");\n_c = VoiceRecorder;\nexport default VoiceRecorder;\nvar _c;\n$RefreshReg$(_c, \"VoiceRecorder\");","map":{"version":3,"names":["React","useState","useRef","axios","db","collection","addDoc","serverTimestamp","jsxDEV","_jsxDEV","VoiceRecorder","onTranscribe","_s","recording","setRecording","mediaRecorderRef","audioChunksRef","handleStart","stream","navigator","mediaDevices","getUserMedia","audio","mediaRecorder","MediaRecorder","current","ondataavailable","event","data","size","push","onstop","blob","Blob","type","formData","FormData","append","res","post","headers","transcriptText","transcript","text","summary","tags","timestamp","err","console","error","start","handleStop","stop","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Sahil Mir/Downloads/echo-ai-complete/frontend/src/VoiceRecorder.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { db } from './firebase'; // adjust path if needed\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\n\nfunction VoiceRecorder({ onTranscribe }) {\n  const [recording, setRecording] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n\n  const handleStart = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n\n      mediaRecorder.onstop = async () => {\n        const blob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n        const formData = new FormData();\n        formData.append(\"audio\", blob, \"recording.webm\");\n\n        try {\n          const res = await axios.post(\"http://localhost:5000/transcribe\", formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n\n          const transcriptText = res.data.transcript;\n\n          // ‚úÖ Save to Firebase Firestore\n          await addDoc(collection(db, \"transcripts\"), {\n            text: transcriptText,\n            summary: \"No summary generated\",\n            tags: [\"voice\", \"recording\"],\n            timestamp: serverTimestamp()\n          });\n\n          // ‚ûï Update frontend as usual\n          onTranscribe({\n            text: transcriptText,\n            summary: \"No summary generated\",\n            tags: [\"voice\", \"recording\"]\n          });\n\n        } catch (err) {\n          console.error(\"‚ùå Error processing audio:\", err);\n        }\n      };\n\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start();\n      setRecording(true);\n    } catch (err) {\n      console.error(\"üéôÔ∏è Mic access denied or error:\", err);\n    }\n  };\n\n  const handleStop = () => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stop();\n      setRecording(false);\n    }\n  };\n\n  return (\n    <div>\n      <button onClick={recording ? handleStop : handleStart}>\n        {recording ? \"üõë Stop Recording\" : \"üéôÔ∏è Start Recording\"}\n      </button>\n    </div>\n  );\n}\n\nexport default VoiceRecorder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}